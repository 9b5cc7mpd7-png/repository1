import{r as c,h as x,j as e}from"./react-igPjiDWs.js";import{E as u,q as p}from"./schemas-BZNeO2np.js";import{L as b}from"./index-CJ5WocF5.js";import{R as g,d as f}from"./dashboardService-DNP3qVFN.js";import{b as l,a as h}from"./format-DFPXa_FT.js";import"./charts-CF39Kqye.js";const j=["7d","30d","90d"],k=()=>{const[s,i]=c.useState("30d"),r=x({queryKey:p.revenue(s),queryFn:()=>f.getRevenueSeries(s)}),a=c.useMemo(()=>{if(!r.data||r.data.length===0)return null;const t=r.data.reduce((n,o)=>n+o.revenue,0),d=r.data.reduce((n,o)=>n+o.cost,0),m=(t-d)/t*100;return{revenueTotal:t,costTotal:d,margin:m}},[r.data]);return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"rounded-2xl border border-border/70 bg-surface/70 p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-label":"Select revenue range",children:j.map(t=>e.jsx("button",{type:"button",onClick:()=>i(t),className:`rounded-lg border px-4 py-2 text-sm font-medium transition ${s===t?"border-accent bg-accent/15 text-text":"border-border bg-panel text-muted hover:text-text"}`,"aria-pressed":s===t,children:t},t))})}),r.isLoading?e.jsx(b,{message:"Crunching analytics..."}):null,r.isError?e.jsx(u,{message:"Analytics data is temporarily unavailable.",onRetry:()=>{r.refetch()}}):null,r.data&&a?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("article",{className:"rounded-2xl border border-border/70 bg-surface/70 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-muted",children:"Total Revenue"}),e.jsx("p",{className:"mt-2 font-display text-2xl font-semibold",children:l(a.revenueTotal)})]}),e.jsxs("article",{className:"rounded-2xl border border-border/70 bg-surface/70 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-muted",children:"Total Cost"}),e.jsx("p",{className:"mt-2 font-display text-2xl font-semibold",children:l(a.costTotal)})]}),e.jsxs("article",{className:"rounded-2xl border border-border/70 bg-surface/70 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-muted",children:"Gross Margin"}),e.jsx("p",{className:"mt-2 font-display text-2xl font-semibold",children:h(a.margin)})]})]}),e.jsx(g,{points:r.data,title:`Revenue breakdown (${s})`})]}):null]})};export{k as AnalyticsPage};

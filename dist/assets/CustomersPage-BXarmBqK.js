import{j as e,r as l,h as m}from"./react-igPjiDWs.js";import{D as p,C as x,E as g,c as h}from"./customerService-D3igDjQn.js";import{E as b,q as j}from"./schemas-BZNeO2np.js";import{L as f}from"./index-CJ5WocF5.js";import"./charts-CF39Kqye.js";import"./format-DFPXa_FT.js";const y=({value:t,onChange:a,onReset:o})=>e.jsxs("section",{className:"grid gap-4 rounded-2xl border border-border/70 bg-surface/70 p-4 md:grid-cols-4",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm",children:["Search",e.jsx("input",{type:"text",value:t.q,onChange:s=>a({...t,q:s.target.value}),placeholder:"Name or email",className:"rounded-lg border border-border bg-panel px-3 py-2 text-sm outline-none transition focus:border-accent"})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm",children:["Status",e.jsxs("select",{value:t.status,onChange:s=>a({...t,status:s.target.value}),className:"rounded-lg border border-border bg-panel px-3 py-2 text-sm outline-none transition focus:border-accent",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"paused",children:"Paused"})]})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm",children:["Tier",e.jsxs("select",{value:t.tier,onChange:s=>a({...t,tier:s.target.value}),className:"rounded-lg border border-border bg-panel px-3 py-2 text-sm outline-none transition focus:border-accent",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:o,className:"w-full rounded-lg border border-border bg-panel px-4 py-2 text-sm font-medium transition hover:border-accent",children:"Reset filters"})})]}),v=(t,a)=>{const[o,s]=l.useState(t);return l.useEffect(()=>{const n=window.setTimeout(()=>{s(t)},a);return()=>{window.clearTimeout(n)}},[a,t]),o},w=()=>{const[t,a]=l.useState({q:"",status:"all",tier:"all"}),[o,s]=l.useState(1),n=v(t,250),c=l.useMemo(()=>({...p,...n,page:o}),[n,o]),r=m({queryKey:j.customers(c),queryFn:()=>h.list(c),placeholderData:i=>i}),d=i=>{a(i),s(1)},u=()=>{a({q:"",status:"all",tier:"all"}),s(1)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{value:t,onChange:d,onReset:u}),r.isLoading?e.jsx(f,{message:"Loading customers..."}):null,r.isError?e.jsx(b,{message:"Could not load customers at the moment.",onRetry:()=>{r.refetch()}}):null,r.data?r.data.items.length>0?e.jsx(x,{rows:r.data.items,page:r.data.page,totalPages:r.data.totalPages,total:r.data.total,isFetching:r.isFetching,onPageChange:s}):e.jsx(g,{title:"No customers match this filter",message:"Adjust your query or clear filters to view all accounts."}):null]})};export{w as CustomersPage};
